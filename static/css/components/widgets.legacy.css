/* =====================================================================
   GEPUB • Widgets / Componentes (inspirado no SUAP)
   Arquivo: /static/css/components/widgets.css
   ===================================================================== */

/* Fallback de tokens caso não existam (seções.css define vários) */
:root{
  --radius-lg: 14px;
  --radius-md: 12px;
  --radius-sm: 10px;

  --border: rgba(0,0,0,.12);
  --border-soft: rgba(0,0,0,.08);

  --text: rgba(0,0,0,.78);
  --muted: rgba(0,0,0,.55);

  --success-bg: rgba(46, 204, 113, .14);
  --success-br: rgba(46, 204, 113, .40);

  --info-bg: rgba(52, 152, 219, .14);
  --info-br: rgba(52, 152, 219, .40);

  --warning-bg: rgba(241, 196, 15, .16);
  --warning-br: rgba(241, 196, 15, .45);

  --danger-bg: rgba(231, 76, 60, .14);
  --danger-br: rgba(231, 76, 60, .45);

  --shadow-sm: 0 1px 2px rgba(0,0,0,.06);

  --brand-soft: rgba(0, 140, 120, .08);
  --brand-br: rgba(0, 140, 120, .20);
  --brand: rgba(0, 120, 105, .95);

  --gap: 16px;
}

/* ---------------------------------------------------------------------
   1) Badge (ref: <span class="badge">12</span>)
   Obs: se você já tem badges.css pronto, pode remover esse bloco.
   --------------------------------------------------------------------- */
.badge{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 26px;
  height: 22px;
  padding: 0 8px;
  border-radius: 999px;

  font-size: .82rem;
  font-weight: 700;
  line-height: 1;

  color: rgba(0,0,0,.65);
  background: rgba(0,0,0,.06);
  border: 1px solid rgba(0,0,0,.10);
}

/* ---------------------------------------------------------------------
   2) Loader
   - page-loader: barra superior (carregamento de página)
   - loader: donut (carregamento de container)
   --------------------------------------------------------------------- */

.page-loader{
  position: fixed;
  z-index: 9999;
  top: 0;
  left: 0;
  width: 100%;
  height: 3px;
  background: rgba(0,0,0,.06);
  overflow: hidden;
}
.page-loader::before{
  content: "";
  position: absolute;
  height: 100%;
  width: 38%;
  left: -38%;
  background: var(--brand);
  animation: gepub-page-loader 1.1s ease-in-out infinite;
}
@keyframes gepub-page-loader{
  0%{ left: -38%; }
  50%{ left: 35%; }
  100%{ left: 110%; }
}

/* donut loader */
.loader{
  width: 74px;
  height: 74px;
  border-radius: 50%;
  margin: 18px auto;

  border: 10px solid rgba(0,0,0,.10);
  border-top-color: var(--brand);
  animation: gepub-spin 1s linear infinite;
}
@keyframes gepub-spin{
  to{ transform: rotate(360deg); }
}

/* ---------------------------------------------------------------------
   3) Barra de progresso
   SUAP mostra barras com % e às vezes "2/5"
   HTML típico que funciona bem:
   <div class="progress progress-warning"><span>70%</span><div class="progress-bar" style="width:70%"></div></div>
   OU o template tag pode gerar algo parecido.
   --------------------------------------------------------------------- */

.progress{
  position: relative;
  width: 100%;
  height: 22px;
  border-radius: 999px;
  background: rgba(0,0,0,.10);
  overflow: hidden;
  border: 1px solid rgba(0,0,0,.10);
  margin: 10px 0;
}

.progress .progress-bar{
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  width: 0%;
  border-radius: 999px;
  background: rgba(0,0,0,.22);
}

.progress > span{
  position: relative;
  z-index: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;

  font-weight: 800;
  font-size: .82rem;
  color: rgba(0,0,0,.55);
}

/* Cores (SUAP-like) */
.progress.progress-success .progress-bar{ background: rgba(46,204,113,.55); }
.progress.progress-info .progress-bar{ background: rgba(52,152,219,.55); }
.progress.progress-warning .progress-bar{ background: rgba(241,196,15,.70); }
.progress.progress-danger .progress-bar{ background: rgba(231,76,60,.55); }
.progress.progress-default .progress-bar{ background: rgba(0,0,0,.18); }

.progress-description{
  margin-top: -4px;
  margin-bottom: 14px;
  color: var(--muted);
  font-size: .95rem;
}

/* ---------------------------------------------------------------------
   4) Checklist (ref:
      <p class="checklist success">... <strong>Concluído</strong></p>
      <p class="checklist error">... <strong>Não Concluído</strong></p>
   --------------------------------------------------------------------- */

.checklist{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;

  padding: 12px 14px;
  border-radius: var(--radius-lg);
  border: 1px solid var(--border);
  background: rgba(0,0,0,.02);
  box-shadow: var(--shadow-sm);
  margin: 10px 0;
  color: var(--text);
}

.checklist strong{
  font-weight: 800;
  white-space: nowrap;
  margin-left: 10px;
}

.checklist::before{
  content: "•";
  display: inline-flex;
  align-items: center;
  justify-content: center;

  width: 26px;
  height: 26px;
  border-radius: 999px;
  margin-right: 10px;
  flex: 0 0 auto;

  color: rgba(0,0,0,.55);
  background: rgba(0,0,0,.06);
  border: 1px solid rgba(0,0,0,.10);
}

.checklist.success{
  background: var(--success-bg);
  border-color: var(--success-br);
}
.checklist.success::before{
  content: "✓";
  background: rgba(46,204,113,.25);
  border-color: rgba(46,204,113,.45);
  color: rgba(0,0,0,.65);
}
.checklist.success strong{ color: rgba(0,0,0,.65); }

.checklist.error{
  background: var(--danger-bg);
  border-color: var(--danger-br);
}
.checklist.error::before{
  content: "✕";
  background: rgba(231,76,60,.22);
  border-color: rgba(231,76,60,.45);
  color: rgba(0,0,0,.65);
}
.checklist.error strong{ color: rgba(0,0,0,.65); }

/* ---------------------------------------------------------------------
   5) Foto de Pessoa
   - photo-circle (com tamanhos: .sm .medium .big .large .responsive .smallest)
   - person (cartão simples com foto + dl)
   --------------------------------------------------------------------- */

.photo-circle{
  width: 80px;
  height: 80px;
  border-radius: 999px;
  overflow: hidden;
  border: 1px solid var(--border);
  background: rgba(0,0,0,.03);
  box-shadow: var(--shadow-sm);
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.photo-circle img{
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* tamanhos (SUAP-like) */
.photo-circle.sm{ width: 40px; height: 40px; }
.photo-circle.smallest{ width: 20px; height: 20px; }
.photo-circle.medium{ width: 100px; height: 100px; }
.photo-circle.big{ width: 150px; height: 150px; }
.photo-circle.large{ width: 300px; height: 300px; }

/* responsivo (diminui em telas menores) */
.photo-circle.responsive{ width: 120px; height: 120px; }
@media (max-width: 720px){
  .photo-circle.responsive{ width: 84px; height: 84px; }
}

.person{
  display: flex;
  align-items: center;
  gap: 12px;

  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 12px 14px;
  background: #fff;
  box-shadow: var(--shadow-sm);
}

.person dl{
  margin: 0;
  display: grid;
  grid-template-columns: auto 1fr;
  gap: 4px 10px;
  color: var(--text);
}
.person dt{ font-weight: 800; color: var(--muted); }
.person dd{ margin: 0; color: var(--text); }

.person.borderless{
  border: none;
  background: transparent;
  box-shadow: none;
  padding: 0;
}

.person.sm .photo-circle{ width: 47px; height: 47px; }
.person.smallest .photo-circle{ width: 30px; height: 30px; }

.person.success{
  background: var(--success-bg);
  border-color: var(--success-br);
}

/* ---------------------------------------------------------------------
   6) Gráficos (container)
   ref: <div class="grafico-item CLASS"></div> + classe .flex-basis-100
   --------------------------------------------------------------------- */

.grafico-item{
  flex: 1 1 420px;
  min-width: 260px;

  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  background: #fff;
  box-shadow: var(--shadow-sm);
  padding: 12px;
}

.grafico-item.flex-basis-100{
  flex-basis: 100%;
}

/* ---------------------------------------------------------------------
   7) Passos (Steps)
   ref:
   <ul class="steps">
     <li><span class="step-info">Aberta</span></li>
     <li><span class="step-alert CLASS active">Em andamento</span></li>
     ...
   </ul>
   --------------------------------------------------------------------- */

.steps{
  list-style: none;
  padding: 0;
  margin: 10px 0 16px 0;

  display: flex;
  flex-wrap: wrap;
  gap: 0;
}

.steps li{
  position: relative;
  display: flex;
  align-items: stretch;
}

/* “pílula seta” */
.steps span[class^="step-"]{
  display: inline-flex;
  align-items: center;
  justify-content: center;

  padding: 10px 16px;
  font-weight: 800;
  color: rgba(0,0,0,.62);

  background: rgba(0,0,0,.06);
  border: 1px solid rgba(0,0,0,.10);

  border-radius: 999px;
  margin-right: 10px;
}

/* efeito seta */
.steps span[class^="step-"]::after{
  content: "";
  position: absolute;
  right: -10px;
  width: 0;
  height: 0;
  border-top: 22px solid transparent;
  border-bottom: 22px solid transparent;
  border-left: 10px solid rgba(0,0,0,.06);
}

.steps li:last-child span[class^="step-"]::after{ display: none; }

/* cores */
.step-info{ background: var(--info-bg); border-color: var(--info-br); }
.step-success{ background: var(--success-bg); border-color: var(--success-br); }
.step-alert{ background: var(--warning-bg); border-color: var(--warning-br); }
.step-error{ background: var(--danger-bg); border-color: var(--danger-br); }

/* ativo */
.steps .active{
  color: rgba(0,0,0,.75);
  box-shadow: 0 0 0 3px rgba(0, 140, 120, .12);
}

/* ---------------------------------------------------------------------
   8) Timeline (vertical)
   ref:
   <ul class="timeline OPTIONAL_CLASS_PARENT">
     <li class="OPTIONAL_CLASS_CHILD">
       <div class="timeline-date">...</div>
       <div class="timeline-icon"></div>
       <div class="timeline-content"><h4>...</h4>...</div>
     </li>
   </ul>

   Variantes:
   - timeline.compact
   - timeline.with-photos (usa .timeline-photo no lugar do icon)
   - itens com .alert .default .error .extra .info .success
   --------------------------------------------------------------------- */

.timeline{
  list-style: none;
  padding: 0;
  margin: 12px 0;

  position: relative;
}

.timeline::before{
  content: "";
  position: absolute;
  top: 0;
  left: 130px;
  width: 4px;
  height: 100%;
  border-radius: 999px;
  background: rgba(0,0,0,.12);
}

.timeline li{
  position: relative;
  display: grid;
  grid-template-columns: 120px 56px 1fr;
  gap: 10px;
  align-items: start;
  margin: 0 0 18px 0;
}

.timeline.compact li{ margin-bottom: 12px; }

.timeline .timeline-date{
  text-align: right;
  padding-top: 10px;
  color: var(--muted);
  font-weight: 800;
  font-size: .92rem;
}

.timeline .timeline-icon,
.timeline .timeline-photo{
  width: 18px;
  height: 18px;
  border-radius: 999px;
  background: rgba(0,0,0,.25);
  border: 3px solid #fff;
  box-shadow: 0 0 0 3px rgba(0,0,0,.10);
  margin-top: 12px;
  justify-self: center;
}

.timeline.with-photos .timeline-photo{
  width: 44px;
  height: 44px;
  border-radius: 999px;
  overflow: hidden;
  border: 1px solid var(--border);
  background: rgba(0,0,0,.04);
}
.timeline.with-photos .timeline-photo img{
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.timeline .timeline-content{
  border-radius: var(--radius-lg);
  border: 1px solid var(--border);
  background: #fff;
  padding: 12px 14px;
  box-shadow: var(--shadow-sm);
}

.timeline .timeline-content h4{
  margin: 0 0 6px 0;
  font-weight: 900;
  color: var(--text);
}
.timeline .timeline-content p{ margin: 4px 0; color: var(--text); }
.timeline .timeline-content .muted{ color: var(--muted); }

/* Destaques por tipo */
.timeline li.default .timeline-content{ background: rgba(0,0,0,.04); }
.timeline li.info .timeline-content{ background: var(--info-bg); border-color: var(--info-br); }
.timeline li.success .timeline-content{ background: var(--success-bg); border-color: var(--success-br); }
.timeline li.alert .timeline-content{ background: var(--warning-bg); border-color: var(--warning-br); }
.timeline li.error .timeline-content{ background: var(--danger-bg); border-color: var(--danger-br); }
.timeline li.extra .timeline-content{
  background: rgba(255, 170, 90, .22);
  border-color: rgba(255, 170, 90, .50);
}

/* Ícones (bolinha) combinando com o item */
.timeline li.info .timeline-icon{ background: rgba(52,152,219,.90); }
.timeline li.success .timeline-icon{ background: rgba(46,204,113,.90); }
.timeline li.alert .timeline-icon{ background: rgba(241,196,15,.95); }
.timeline li.error .timeline-icon{ background: rgba(231,76,60,.90); }
.timeline li.extra .timeline-icon{ background: rgba(255,140,60,.95); }

/* obs (mais discreto, sem destaque forte) */
.timeline.obs .timeline-content{
  background: rgba(0,0,0,.02);
  border-color: rgba(0,0,0,.10);
  box-shadow: none;
}

/* Responsivo */
@media (max-width: 860px){
  .timeline::before{ left: 22px; }
  .timeline li{
    grid-template-columns: 1fr;
    padding-left: 42px;
  }
  .timeline .timeline-date{
    text-align: left;
    padding-top: 0;
    margin-left: -42px;
  }
  .timeline .timeline-icon,
  .timeline .timeline-photo{
    position: absolute;
    left: 12px;
    top: 12px;
    margin: 0;
  }
}

/* ---------------------------------------------------------------------
   9) Timeline horizontal (tabela)
   ref:
   <table class="timeline-horizontal">
     <th><span class="marker">02/06 2014</span></th>
   --------------------------------------------------------------------- */

.timeline-horizontal{
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  background: #fff;
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  overflow: hidden;
  box-shadow: var(--shadow-sm);
}

.timeline-horizontal th,
.timeline-horizontal td{
  border-right: 1px solid rgba(0,0,0,.08);
  border-bottom: 1px solid rgba(0,0,0,.08);
  padding: 10px 10px;
  text-align: center;
  vertical-align: middle;
  font-size: .92rem;
}

.timeline-horizontal th:last-child,
.timeline-horizontal td:last-child{ border-right: none; }

.timeline-horizontal tr:last-child td{ border-bottom: none; }

.timeline-horizontal th{
  background: rgba(0,0,0,.03);
  font-weight: 900;
  color: rgba(0,0,0,.70);
}

.timeline-horizontal .marker{
  display: inline-flex;
  align-items: center;
  justify-content: center;

  min-width: 52px;
  height: 52px;
  padding: 0 10px;

  border-radius: 999px;
  background: rgba(52,152,219,.25);
  border: 1px solid rgba(52,152,219,.45);

  font-weight: 900;
  color: rgba(0,0,0,.65);
}

/* células preenchidas */
.timeline-horizontal td.default{ background: rgba(52,152,219,.35); }
.timeline-horizontal td.final{ background: rgba(231,76,60,.20); }

/* ---------------------------------------------------------------------
   10) Calendários (anual + mensal)
   ref:
   <div class="calendario"><table class="calendario-anual">...</table></div>
   <div class="calendario calendario-mensal"><table>...</table></div>
   + classes em td: feriado, recesso, evento, fds, hoje, conflito
   + lista: <ul class="legenda"><li class="feriado">...</li>...
   --------------------------------------------------------------------- */

.calendario{
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  background: #fff;
  box-shadow: var(--shadow-sm);
  overflow: hidden;
  padding: 10px;
}

.calendario table{
  width: 100%;
  border-collapse: collapse;
}

.calendario caption{
  font-weight: 900;
  color: rgba(0,0,0,.70);
  padding: 10px 0;
}

.calendario th.semana{
  background: rgba(0,0,0,.04);
  color: rgba(0,0,0,.65);
  font-weight: 900;
  padding: 10px 0;
  border: 1px solid rgba(0,0,0,.08);
}

.calendario td{
  border: 1px solid rgba(0,0,0,.08);
  height: 62px;
  vertical-align: top;
  padding: 8px;
  position: relative;
  background: #fff;
}

.calendario td.vazio{ background: rgba(0,0,0,.03); }

.calendario td > span{
  display: inline-flex;
  width: 26px;
  height: 26px;
  border-radius: 999px;
  align-items: center;
  justify-content: center;
  font-weight: 900;
  color: rgba(0,0,0,.60);
  background: rgba(0,0,0,.06);
}

/* finais de semana */
.calendario td.fds{
  background: rgba(0,0,0,.03);
}

/* dia de hoje */
.calendario td.hoje{
  outline: 3px solid rgba(0, 140, 120, .22);
  outline-offset: -3px;
}

/* tipos */
.calendario td.feriado,
.calendario li.feriado{ background: var(--danger-bg); border-color: var(--danger-br); }

.calendario td.ferias,
.calendario li.ferias{ background: var(--success-bg); border-color: var(--success-br); }

.calendario td.recesso,
.calendario li.recesso{ background: var(--warning-bg); border-color: var(--warning-br); }

.calendario td.evento,
.calendario li.evento{ background: var(--info-bg); border-color: var(--info-br); }

.calendario td.conflito,
.calendario li.conflito{
  background: rgba(150, 0, 0, .16);
  border-color: rgba(150, 0, 0, .45);
}

/* eventos dentro do dia (mensal) */
.calendario-eventos{
  list-style: none;
  padding: 8px 0 0 0;
  margin: 0;
  display: grid;
  gap: 6px;
}

.calendario-eventos li{
  border-radius: 12px;
  padding: 8px 10px;
  border: 1px solid rgba(0,0,0,.10);
  background: rgba(0,0,0,.03);
  color: rgba(0,0,0,.70);
  font-weight: 700;
  font-size: .85rem;
  line-height: 1.2;
}

.calendario-eventos li strong{
  display: block;
  font-weight: 900;
  margin-bottom: 4px;
}

/* cores por tipo (mensal) */
.calendario-eventos li.success{ background: var(--success-bg); border-color: var(--success-br); }
.calendario-eventos li.error{ background: var(--danger-bg); border-color: var(--danger-br); }
.calendario-eventos li.info{ background: var(--info-bg); border-color: var(--info-br); }
.calendario-eventos li.alert{ background: var(--warning-bg); border-color: var(--warning-br); }

/* Legenda (pílulas) */
.legenda{
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  list-style: none;
  padding: 10px 0 0 0;
  margin: 0;
}

.legenda li{
  display: inline-flex;
  align-items: center;
  gap: 8px;

  padding: 8px 12px;
  border-radius: 999px;
  border: 1px solid rgba(0,0,0,.12);
  background: rgba(0,0,0,.04);
  color: rgba(0,0,0,.65);
  font-weight: 800;
  font-size: .86rem;
}

/* ---------------------------------------------------------------------
   Ajustes gerais responsivos para widgets
   --------------------------------------------------------------------- */
@media (max-width: 720px){
  .steps span[class^="step-"]{
    margin-right: 8px;
    padding: 10px 12px;
  }
  .steps span[class^="step-"]::after{ display:none; }
  .calendario td{ height: 54px; padding: 6px; }
}
