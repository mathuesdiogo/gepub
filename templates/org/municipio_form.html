{% extends "core/base.html" %}

{% block title %}Novo Município • Organização • GEPUB{% endblock %}
{% block header %}Organização{% endblock %}

{% block breadcrumbs %}
  <div class="breadcrumbs">
    <a class="breadcrumbs__link" href="{% url 'core:dashboard' %}">Início</a>
    <span class="breadcrumbs__sep">/</span>
    <a class="breadcrumbs__link" href="{% url 'org:index' %}">Organização</a>
    <span class="breadcrumbs__sep">/</span>
    <a class="breadcrumbs__link" href="{% url 'org:municipio_list' %}">Municípios</a>
    <span class="breadcrumbs__sep">/</span>
    <span class="breadcrumbs__current">{% if mode == "create" %}Novo{% else %}Editar{% endif %}</span>
  </div>
{% endblock %}

{% block content %}
  <div class="card" style="max-width: 900px;">
    <div class="card__title">
      {% if mode == "update" %}Editar Município{% else %}Novo Município{% endif %}
    </div>

    <div class="card__body">
      <form method="post" style="display:grid; grid-template-columns: 1fr 120px; gap:12px;">
        {% csrf_token %}

        <div style="grid-column:1 / -1;">
          <label class="small">Nome</label><br>
          {{ form.nome }}
          {% if form.nome.errors %}<div class="small" style="color:#ffb4b4;">{{ form.nome.errors|striptags }}</div>{% endif %}
        </div>

        <div>
          <label class="small">UF</label><br>
          {{ form.uf }}
          {% if form.uf.errors %}<div class="small" style="color:#ffb4b4;">{{ form.uf.errors|striptags }}</div>{% endif %}
        </div>

        <div style="display:flex; align-items:end; padding-bottom:2px;">
          <label class="small" style="display:flex; align-items:center; gap:8px;">
            {{ form.ativo }} Ativo
          </label>
        </div>

        <div class="form-section" style="grid-column:1 / -1; margin-top:6px;">
          <div class="form-section__title">Dados da Prefeitura</div>

          <div style="display:grid; grid-template-columns: 1fr 1fr; gap:12px;">
            <div>
              <label class="small">CNPJ</label><br>
              {{ form.cnpj_prefeitura }}
            </div>

            <div>
              <label class="small">Prefeito(a)</label><br>
              {{ form.nome_prefeito }}
            </div>

            <div style="grid-column:1 / -1;">
              <label class="small">Razão Social</label><br>
              {{ form.razao_social_prefeitura }}
            </div>

            <div style="grid-column:1 / -1;">
              <label class="small">Nome Fantasia</label><br>
              {{ form.nome_fantasia_prefeitura }}
            </div>

            <div style="grid-column:1 / -1;">
              <label class="small">Endereço</label><br>
              {{ form.endereco_prefeitura }}
            </div>

            <div>
              <label class="small">Telefone</label><br>
              {{ form.telefone_prefeitura }}
            </div>

            <div>
              <label class="small">E-mail</label><br>
              {{ form.email_prefeitura }}
            </div>

            <div style="grid-column:1 / -1;">
              <label class="small">Site</label><br>
              {{ form.site_prefeitura }}
            </div>
          </div>
        </div>

        <div style="grid-column:1 / -1; display:flex; gap:10px; margin-top:10px;">
          <button type="submit">Salvar</button>
          <a class="link" href="{% url 'org:municipio_list' %}">Cancelar</a>
        </div>
      </form>
    </div>
  </div>
{% endblock %}

