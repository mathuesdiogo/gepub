{% extends "core/base.html" %}

{% block title %}{{ secretaria.nome }} • Organização • GEPUB{% endblock %}
{% block header %}Organização{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
  <a class="breadcrumbs__link" href="{% url 'core:dashboard' %}">Início</a>
  <span class="breadcrumbs__sep">/</span>
  <a class="breadcrumbs__link" href="{% url 'org:index' %}">Organização</a>
  <span class="breadcrumbs__sep">/</span>
  <a class="breadcrumbs__link" href="{% url 'org:secretaria_list' %}">Secretarias</a>
  <span class="breadcrumbs__sep">/</span>
  <span class="breadcrumbs__current">{{ secretaria.nome }}</span>
</div>
{% endblock %}

{% block content %}
<div class="card">
  <div class="card__body">

    {% include "core/partials/components/layout/page_head.html" with title=secretaria.nome subtitle="Visão geral da secretaria e suas unidades" actions=actions %}

    <!-- ============================================= -->
    <!-- SEÇÃO 1 — Indicadores da Secretaria           -->
    <!-- ============================================= -->
    <section class="section">
      <header class="section__head">
        <h3 class="section__title">
          <i class="fa-solid fa-chart-column"></i>
          Indicadores da Secretaria
        </h3>
        <div class="section__meta">
          <span>Visão consolidada</span>
        </div>
      </header>

      <div class="section__body">

        <div class="dashboard-blocks">

          <div class="dashboard-block dashboard-block--neutral">
            <div class="dashboard-block__label">Município</div>
            <div class="dashboard-block__value">
              {{ secretaria.municipio.nome }} / {{ secretaria.municipio.uf }}
            </div>
          </div>

          <a class="dashboard-block dashboard-block--primary dashboard-block--link"
             href="{% url 'org:unidade_list' %}">
            <div class="dashboard-block__label">Unidades</div>
            <div class="dashboard-block__value">{{ unidades_total }}</div>
            <div class="dashboard-block__meta">Ver lista</div>
          </a>

          <a class="dashboard-block dashboard-block--success dashboard-block--link"
             href="{% url 'educacao:turma_list' %}">
            <div class="dashboard-block__label">Turmas</div>
            <div class="dashboard-block__value">{{ turmas_total }}</div>
            <div class="dashboard-block__meta">Ver lista</div>
          </a>

          <a class="dashboard-block dashboard-block--info dashboard-block--link"
             href="{% url 'org:setor_list' %}">
            <div class="dashboard-block__label">Setores</div>
            <div class="dashboard-block__value">{{ setores_total }}</div>
            <div class="dashboard-block__meta">Ver lista</div>
          </a>

          <a class="dashboard-block dashboard-block--warning dashboard-block--link"
             href="{% url 'accounts:usuarios_list' %}">
            <div class="dashboard-block__label">Usuários</div>
            <div class="dashboard-block__value">{{ usuarios_total }}</div>
            <div class="dashboard-block__meta">Ver lista</div>
          </a>

        </div>

      </div>
    </section>

    <!-- ============================================= -->
    <!-- SEÇÃO 2 — Unidades Vinculadas                 -->
    <!-- ============================================= -->
    <section class="section">
      <header class="section__head">
        <h3 class="section__title">
          <i class="fa-solid fa-building"></i>
          Unidades Vinculadas
        </h3>
      </header>

      <div class="section__body">
        {% include "core/partials/components/data/table_shell.html" with headers=headers rows=rows page_obj=None empty_title="Nenhuma unidade vinculada" empty_text="Esta secretaria ainda não possui unidades cadastradas." %}
      </div>
    </section>

  </div>
</div>
{% endblock %}
