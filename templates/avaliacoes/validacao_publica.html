{% extends "core/base_public.html" %}

{% block title %}Validação de Folha de Prova • GEPUB{% endblock %}

{% block content %}
<main class="carteira-public" style="max-width:960px;margin:24px auto;padding:0 16px;">
  <section class="card"><div class="card__body">
    <h1 style="margin-top:0;">Validação de Folha de Prova</h1>
    <p class="muted">Token {{ busca_token }}</p>

    <div class="detail-summary" style="margin-top:12px;">
      <div><strong>Avaliação:</strong> {{ avaliacao.titulo }}</div>
      <div><strong>Disciplina:</strong> {{ avaliacao.disciplina|default:"-" }}</div>
      <div><strong>Turma:</strong> {{ avaliacao.turma.nome }}</div>
      <div><strong>Data:</strong> {{ avaliacao.data_aplicacao|date:"d/m/Y" }}</div>
      <div><strong>Aluno:</strong> {{ nome_mascarado }}</div>
      <div><strong>Status:</strong> {{ aplicacao.get_status_display }}</div>
      <div><strong>Nota:</strong> {% if aplicacao.nota is not None %}{{ aplicacao.nota|floatformat:2 }}{% else %}-{% endif %}</div>
      <div><strong>Percentual:</strong> {% if aplicacao.percentual is not None %}{{ aplicacao.percentual|floatformat:2 }}%{% else %}-{% endif %}</div>
      <div><strong>Integridade:</strong> {% if integridade_ok %}Documento íntegro{% else %}Falha de integridade{% endif %}</div>
    </div>

    <h3 style="margin-top:18px;">Respostas registradas</h3>
    <div class="table-shell"><div class="table-shell__body">
      <table class="table">
        <thead><tr><th>Questão</th><th>Resposta</th></tr></thead>
        <tbody>
          {% for k,v in folha.respostas_marcadas.items %}
            <tr><td>{{ k }}</td><td>{{ v }}</td></tr>
          {% empty %}
            <tr><td colspan="2">Sem respostas registradas.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div></div>
  </div></section>
</main>
{% endblock %}
