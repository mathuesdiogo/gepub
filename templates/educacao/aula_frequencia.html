{% extends "educacao/base_modulo.html" %}
{% block title %}Frequência • Educação • GEPUB{% endblock %}

{% block module_content %}
<div class="card"><div class="card__body">
{% include "core/partials/components/layout/page_head.html" with title="Frequência" subtitle=diario.turma.nome actions=actions %}
{% include "core/partials/components/data/filter_bar.html" with q=q placeholder="Buscar aluno por nome, CPF ou NIS..." action_url=action_url clear_url=clear_url has_filters=has_filters autocomplete_url=autocomplete_url autocomplete_href=autocomplete_href %}

<form id="freq-form" method="post">
  {% csrf_token %}
  <table class="table">
    <thead>
      <tr>
        <th>Aluno</th>
        <th style="width:240px;">Status</th>
      </tr>
    </thead>
    <tbody>
      {% for row in alunos_render %}
      <tr>
        <td>{{ row.nome }}</td>
        <td>
          <select name="aluno_{{ row.id }}" {% if not can_edit %}disabled{% endif %}>
            <option value="P" {% if row.status == "P" %}selected{% endif %}>Presente</option>
            <option value="F" {% if row.status == "F" %}selected{% endif %}>Falta</option>
            <option value="J" {% if row.status == "J" %}selected{% endif %}>Justificada</option>
          </select>
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="2">Nenhum aluno encontrado.</td></tr>
      {% endfor %}
    </tbody>
  </table>

  {% if can_edit %}
  <div class="actions">
    <button class="btn btn-primary" type="submit"><i class="fa-solid fa-check" aria-hidden="true"></i><span>Salvar Frequência</span></button>
  </div>
  {% endif %}
</form>

</div></div>
{% endblock %}
